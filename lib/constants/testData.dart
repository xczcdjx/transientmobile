import 'package:audio_service/audio_service.dart';

final lyricDataTest={
  "781":		"[00:01.170]In the cycle of time, we define our role,\n[00:03.840]With energy rising, chasing every goal.\n[00:13.920]Analyze the moment, theimpact's real,\n[00:17.460]Adjust your attitude,it's time to feel.\n[00:20.550]Every challenge helps us grow,\n[00:23.220]Reflect, adaptthat's how we glow.\n[00:26.880]Select your path, approach it strong,\n[00:30.000]Even when the process feels too long.\n[00:33.090]Significant steps may seem so small,\n[00:36.240]But each one helps you rise, not fall.\n[00:45.750]We are the youth, full of potential and fire,\n[00:49.500]With dreams so vivid, lifting us higher.\n[00:52.800]From concept to action,we'll generate light,\n[00:56.220]In this complex world, we still shine bright.\n[01:06.660]Create your future, be aware and wise,\n[01:09.480]Determine the truth, see through the lies.\n[01:13.080]Emphasize the value of a steady mind,\n[01:15.930]In every circumstance, strengthyou'll find.\n[01:19.440]Balance the pressure, the mental stress,\n[01:22.740]Contribute your effort, give it your best.\n[01:26.100]Resources are limited, but so is fear,\n[01:29.250]Innovation and focus will make it clear.\n[01:33.690]We are the youth, full of potential and fire,\n[01:37.530]With dreams so vivid, lifting us higher.\n[01:40.800]From concept to action,we'll generate light,\n[01:44.220]In this complex world, we still shine bright.\n[02:00.600]So cooperate, commit, and trust the plan,\n[02:03.960]Each method a ladder to help you stand.\n[02:07.290]Obstacles occur, butdon't decline\n[02:10.770]You're capable, powerful by design.\n[02:25.770]Expand your vision, embrace the unknown,\n[02:29.010]Compare your progress with seedsyou've sown.\n[02:32.340]From theory to action, from stress to gain,\n[02:35.460]You'll survive the storm, dance in the rain.\n[02:45.570]Thefuture's a system we help construct,\n[02:48.840]With passion and will, wewon't be stuck.\n[02:52.200]Establish your value, your purpose, your name\n[02:55.350]In the rhythm of youth, ignite your flame\n",
  "779":"[00:00.300]We scrutinize our hearts, in the mirror of the night,\n[00:06.750]With resilience and zeal, we chase the vibrant light.\n[00:25.320]Amid the ambiguity, we validate our dreams,\n[00:29.970]Navigate through conundrums, through paradoxical themes.\n[00:34.860]Innovation is our legacy, a spectrum we embrace,\n[00:40.170]In a hierarchy of noise, we find our rightful place.\n[00:45.660]We quantify our goals, prioritize the climb,\n[00:51.450]Implement each step with integrity and time.\n[00:57.060]This is our youth, resilient and profound,\n[01:02.370]We foster change where clarity is found.\n[01:06.180]Through ephemeral doubts, we validate our worth,\n[01:13.830]In every paradox, we find our rebirth.\n[01:25.140]Adverse winds may fluctuate the plan,\n[01:29.790]But we sustain the course as best we can.\n[01:33.060]Mitigate the fallacy, rectify the fear,\n[01:40.740]Yield to no grim voices we hear.\n[01:45.810]Through scrutiny and ethics, we cultivate our trait,\n[01:51.390]Juxtapose the bias, transcend the weight.\n[01:58.560]This is our youth, resilient and profound,\n[02:03.750]We foster change where clarity is found.\n[02:07.530]Through ephemeral doubts, we validate our worth,\n[02:15.180]In every paradox, we find our rebirth.\n[02:27.060]With empirical strength and tacit fire,\n[02:32.070]We defy the odds, we climb higher.\n[02:37.200]Every dilemma is a call to persist,\n[02:41.550]With gregarious dreams, we coexist.\n[02:51.060]No fallacy, no hegemony can deter our way,\n[02:56.190]We transcend rhetoric, seize the day.\n[03:01.080]From zenith hopes to obscure nights,\n[03:06.390]We radiate youth’ s incandescent lights.\n[03:13.920]So we hypothesize, then verify and grow,\n[03:18.840]In the paradox of life, our value will show.\n",
  "29":	"[id:\$00000000]\r\n[ti:Zombies on Your Lawn]\r\n[ar:Laura Shigihara]\r\n[al:植物大战僵尸 Original Soundtrack]\r\n[by:]\r\n[00:00.00]Zombies on Your Lawn - Laura Shigihara (劳拉·鴫原)\r\n[00:09.23]Sunflower\r\n[00:18.91]1  2  3 (Whew  )\r\n[00:20.83]There's a zombie on your lawn\r\n[00:24.62]There's a zombie on your lawn\r\n[00:29.30]There's a zombie on your lawn\r\n[00:33.62]We don't want zombies on the lawn\r\n[00:38.44]I know your type: tall  dark  and dead\r\n[00:41.19]You want to bite all the petals off of my head\r\n[00:44.05]And then eat the brains of\r\n[00:46.01]The one who planted me here\r\n[00:47.85]I'm just a sunflower but see\r\n[00:50.86]Me power an entire infantry\r\n[00:52.96]You like the taste of brains\r\n[00:54.86]We don't like zombies\r\n[00:59.14]I used to play football\r\n[01:03.65]Road cones protect my head\r\n[01:08.14]I have a screen-door shield\r\n[01:13.34]We are the undead\r\n[01:15.82]There's a zombie on your lawn\r\n[01:19.56]There's a zombie on your lawn\r\n[01:24.12]There's a zombie on your lawn\r\n[01:28.50]We don't want zombies on the lawn\r\n[01:33.33]Maybe it's time to reevaluate\r\n[01:35.42]I know you have a lot of food on your plate\r\n[01:38.97]Brains are quite rich in cholesterol\r\n[01:43.37]You're dead so it doesn't matter\r\n[01:45.79]Instead we'll use this solar power\r\n[01:47.99]To make a lawn defense at any hour\r\n[01:53.89]I like your tricycle\r\n[01:58.53]There's butter on my head\r\n[02:03.04]I'm gonna eat your brains\r\n[02:08.02]We are the undead\r\n[02:10.41]There's a zombie on your lawn\r\n[02:14.45]There's a zombie on your lawn\r\n[02:19.15]There's a zombie on your lawn\r\n[02:23.19]We don't want zombies on the lawn\r\n"
};


/// 把后端的 List<Map> 转为 List<MediaItem>
List<MediaItem> mediaItemsFromJson(List<dynamic> list) {
  return list.map((raw) {
    final map = Map<String, dynamic>.from(raw as Map);

    final payload = Map<String, dynamic>.from(map['payload'] ?? {});
    final singers = (payload['singers'] as List<dynamic>? ?? [])
        .map((e) => (e as Map)['name']?.toString() ?? '')
        .where((s) => s.isNotEmpty)
        .toList();

    // 处理封面 URL：把 {size} 占位符替换为常用尺寸（可按需改成 400x400/200x200）
    String? imgUrl = payload['imgUrl']?.toString();
    if (imgUrl != null && imgUrl.contains('{size}')) {
      imgUrl = imgUrl.replaceAll('{size}', '400x400');
    }

    // 音频 URL：建议 URL 编码（中文、空格等），player 播放时更稳
    final musUrl = map['musUrl']?.toString();
    // final encodedMusUrl = musUrl == null ? null : Uri.encodeFull(musUrl);

    // 时长：后端给的是秒
    final seconds = (map['duration'] is num) ? (map['duration'] as num).toInt() : null;

    return MediaItem(
      id: map['id']?.toString() ?? '',                 // 确保是字符串
      album: payload['album']?.toString(),             // 可为 null
      title: map['name']?.toString() ?? '未知标题',
      artist: singers.isEmpty ? null : singers.join('、'),
      duration: seconds == null ? null : Duration(seconds: seconds),
      artUri: imgUrl == null ? null : Uri.parse(imgUrl),
      extras: <String, dynamic>{
        'musUrl': musUrl,                       // 播放用
        'rawMusUrl': musUrl,                           // 原始未编码（可选）
        'size': map['size'],
        'albumId': payload['albumId'],
        'encodeUrl': map['encodeUrl'],
        'singerIds': (payload['singers'] as List<dynamic>? ?? [])
            .map((e) => (e as Map)['id'])
            .toList(),
      },
    );
  }).toList();
}
